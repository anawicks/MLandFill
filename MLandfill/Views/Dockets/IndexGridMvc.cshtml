@model IEnumerable<MLandfill.Models.DocketGrid>
@using GridMvc.Html
@{
    ViewBag.Title = "List";
}



@{
    Layout = null;
}
<style>
    .hidden {
        display: none;
    }

    .Fontsize {
        font-size: small;
    }

    p.ex1 {
        margin-left: 2cm;
    }
</style>
<script src="~/Scripts/jquery-1.12.4.min.js"></script>
<link href="~/Content/bootstrap.min.css" rel="stylesheet" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="~/Scripts/bootstrap.min.js"></script>
<script src="@Url.Content("~/Scripts/gridmvc.min.js")"></script>
<link href="@Url.Content("~/Content/Gridmvc.css")" rel="stylesheet" />

<input type="hidden" id="hiddenDocketId" />

<div class="modal fade" id="myModal">

    <div class="modal-dialog">


        <div class="modal-content">

            <div class="modal-header">


                <a herf="#" class="close" data-dismiss="modal">&times;</a>
                <h3 class="modal-title">Delete this Docket?</h3>

            </div>
            <div class="modal-body">

                <h3> Are You Sure You want to Delete this Docket? </h3>


            </div>
            <div class="modal-footer">

                <a herf="#" class="btn btn-default" data-dismiss="modal">Cancel</a>
                <a herf="#" class="btn btn-success" onclick="DeleteDocket()">Delete Docket</a>

            </div>

        </div><!-- /.modal-content -->

    </div><!-- /.modal-dialog -->

</div><!-- /.modal -->



<h3 style="margin-left:45px;color:#0ab7b2;">Waste Docket List</h3>
<div id="DocketDivId">
    <div style="width:100%;margin-left:45px;height:100%;border:1px solid">
        @Html.Grid(Model).Columns(columns =>
   {

   columns.Add()
           .Encoded(false)
           .Sanitized(false)
           .SetWidth(30)
           .Css("Fontsize")
           .RenderValueAs(o => Html.ActionLink("Details", "Details", new { id = o.DocketId }));

   //http://mvc-grid.azurewebsites.net/Home/Installation

   columns.Add(c => c.ManifestNo).Titled("Manifest No").Filterable(true).SetWidth(45).Css("Fontsize");

   columns.Add(c => c.Producer).Titled("Generator").Filterable(true).SetWidth(180).Css("Fontsize");
   columns.Add(c => c.Lsd).Titled("LSD").Filterable(false).SetWidth(140).Css("Fontsize");
   //columns.Add(c => c.WasteDescription).Titled("Waste Descrip");
   columns.Add(c => c.ApprovalCode).Titled("Approval Code").SetWidth(50).SetWidth(150).Css("Fontsize");
   columns.Add(c => c.Substance).Titled("Substance").Filterable(true).SetWidth(290).Css("Fontsize");
   columns.Add(c => c.DriverName).Titled("Driver Name").SetWidth(40).Css("Fontsize");
   columns.Add(c => c.ScaleTicket).Titled("Scale Ticket").SetWidth(40).Css("Fontsize");
   columns.Add(c => c.JobDate).Titled("JobDate").Format("{0:dd-MMM-yyyy}").Css("Fontsize");


   //  <a herf="#" class="btn btn-danger" onclick="ConfirmDelete(@Model.DocketId)">Delete Record ?</a>    <br />

   columns.Add()
   .Encoded(false)
   .Sanitized(false)
.RenderValueAs(o => Html.ActionLink("Delete", "Delete", new { id = o.DocketId }, new { @class = "delete", @id = o.DocketId }));

   //har one (o => Html.ActionLink("Delete", "Delete", new { id = o.DocketId }, new { @class = "delete", @id = o.DocketId }));

    @*< a herf = "#" class="btn btn-danger" onclick="ConfirmDelete(@Model.DocketId)">Delete Record ?</a> );*@

    @*.RenderValueAs(o => Html.ActionLink("Delete", "Delete", new { id = o.DocketId }, new { @class = "delete", @id= o.DocketId }));*@

    @*.RenderValueAs(o => @<button onclick="DeactivateContract()"><i class='oi iconPowerOn' data-glyph='power-standby' title='Deactivate Contract'></i></button>);*@

   }).WithPaging(20).Sortable(true)

        <p>
            @Html.ActionLink("Create New", "Create")
        </p>
    </div>
</div>


@section Scripts {


    <script>

        $(document).ready(function () {

            $("#DocketDivId .js-delete").on("click", function () {
                confirm("Aluper are you sure Man?");

            });

        });

    </script>
    @Scripts.Render("~/bundles/jqueryval")
}
<script type="text/javascript">

    $(document).ready(function () {

 
        $('a.delete').click(OnDeleteClick);

    });

 

    function OnDeleteClick(e) {

        var employeeId = e.target.id;
        alert("TTT " + employeeId);


    
   
  
        var flag =   confirm('You are about to delete Docket ID ' + employeeId + ' permanently. Are you sure you want to delete this record?');

        if (flag)
        {

            $.ajax({

                url: "/Dockets/DeleteT",

                type: 'POST',

                data: { docketId: employeeId },

                dataType: 'json',

                success: function (result) { alert(result); $("#" + employeeId).parent().parent().remove(); },

                error: function () { alert('Error!'); }

            });

        }

        return false;

    }

</script>


<script>




    var ConfirmDelete = function (id) {
        alert("jajajj x" + id);
        $("#hiddenDocketId").val(id);


        $("#myModal").modal('show');



    }

    var DeleteDocket = function () {
        var fndocketId = $("#hiddenDocketId").val();

        alert("fn " + fndocketId);
        $.ajax(
			{
			    type: "POST",
			    url: "/Dockets/Delete",
			    dataType: "html",
			    data: { docketId: fndocketId },
			    sucess: $("#myModal").modal("hide")






			})


    }
    var onAjaxRequestSuccess = function (result) {

        if (result.EnableError) {
            // Setting.
            alert(result.ErrorMsg);
        } else if (result.EnableSuccess) {
            // Setting.
            alert(result.SuccessMsg);
            // Resetting form.
            $('#AjaxformId').get(0).reset();

        }
    }
    function ddListChange() {

        $.get('@Url.Action("IndexGridMvc")');

    }
</script>
